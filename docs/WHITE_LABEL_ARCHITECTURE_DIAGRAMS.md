# ğŸ—ï¸ SmartClass24 Multi-Tenant Architecture Diagrams

---

## ğŸŒ System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SmartClass24 Global Platform                     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Ghana Users      â”‚  â”‚   Dubai Users   â”‚  â”‚   Lagos Users   â”‚ â”‚
â”‚  â”‚  smartclass24.app  â”‚  â”‚  dii.smart...   â”‚  â”‚  lagos.smart... â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                      â”‚                     â”‚           â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                   â”‚                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                    â”‚   Tenant Resolution         â”‚                  â”‚
â”‚                    â”‚   (Domain-based routing)    â”‚                  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                   â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚         â”‚                         â”‚                         â”‚      â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚ Branding â”‚            â”‚  Content  â”‚            â”‚  License  â”‚â”‚
â”‚    â”‚  Theme   â”‚            â”‚ Resolver  â”‚            â”‚  Manager  â”‚â”‚
â”‚    â”‚  Logo    â”‚            â”‚  Region/  â”‚            â”‚   Tier    â”‚â”‚
â”‚    â”‚  Colors  â”‚            â”‚  Custom   â”‚            â”‚  Limits   â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â”‚                         â”‚                         â”‚      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                   â”‚                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                    â”‚    Next.js App Router       â”‚                  â”‚
â”‚                    â”‚    (Single Codebase)        â”‚                  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                   â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚         â”‚                         â”‚                         â”‚      â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚  Firebase   â”‚         â”‚ Firestore â”‚          â”‚   Firebase  â”‚â”‚
â”‚    â”‚    Auth     â”‚         â”‚  (Multi-  â”‚          â”‚   Storage   â”‚â”‚
â”‚    â”‚ (Tenant ID) â”‚         â”‚  Tenant)  â”‚          â”‚   (Assets)  â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Firestore Data Architecture

### Multi-Tenant Collection Structure

```
firestore/
â”‚
â”œâ”€â”€ ğŸ“ tenants/                         # Tenant Registry (Admin Only)
â”‚   â”œâ”€â”€ smartclass24/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ current                # Tenant configuration
â”‚   â”‚   â”œâ”€â”€ branding/
â”‚   â”‚   â”‚   â””â”€â”€ current                # Logo, colors, domain
â”‚   â”‚   â””â”€â”€ licensing/
â”‚   â”‚       â””â”€â”€ current                # Seats, tier, limits
â”‚   â”‚
â”‚   â””â”€â”€ dubaiinstitute/
â”‚       â”œâ”€â”€ config/
â”‚       â”œâ”€â”€ branding/
â”‚       â””â”€â”€ licensing/
â”‚
â”œâ”€â”€ ğŸ“ smartclass24_students/           # Ghana tenant students
â”‚   â”œâ”€â”€ user123/
â”‚   â”‚   â”œâ”€â”€ profile                    # Student profile
â”‚   â”‚   â”œâ”€â”€ quizAttempts/
â”‚   â”‚   â”‚   â”œâ”€â”€ attempt1
â”‚   â”‚   â”‚   â””â”€â”€ attempt2
â”‚   â”‚   â”œâ”€â”€ progress/
â”‚   â”‚   â””â”€â”€ achievements/
â”‚   â””â”€â”€ user456/
â”‚
â”œâ”€â”€ ğŸ“ dubaiinstitute_students/         # Dubai tenant students
â”‚   â”œâ”€â”€ user789/
â”‚   â”‚   â”œâ”€â”€ profile
â”‚   â”‚   â”œâ”€â”€ quizAttempts/
â”‚   â”‚   â””â”€â”€ progress/
â”‚   â””â”€â”€ user101/
â”‚
â”œâ”€â”€ ğŸ“ smartclass24_challenges/         # Ghana tenant challenges
â”‚   â”œâ”€â”€ challenge1
â”‚   â””â”€â”€ challenge2
â”‚
â”œâ”€â”€ ğŸ“ dubaiinstitute_challenges/       # Dubai tenant challenges
â”‚   â”œâ”€â”€ challenge1
â”‚   â””â”€â”€ challenge2
â”‚
â”œâ”€â”€ ğŸ“ dubaiinstitute_content/          # Dubai custom content
â”‚   â”œâ”€â”€ subjects/
â”‚   â”‚   â”œâ”€â”€ mathematics/
â”‚   â”‚   â”œâ”€â”€ arabic/
â”‚   â”‚   â””â”€â”€ islamic-studies/
â”‚   â”œâ”€â”€ lessons/
â”‚   â””â”€â”€ quizzes/
â”‚
â”œâ”€â”€ ğŸ“ shared_content/                  # Global content (All tenants)
â”‚   â”œâ”€â”€ ghana/
â”‚   â”‚   â”œâ”€â”€ jhs/
â”‚   â”‚   â”‚   â”œâ”€â”€ mathematics/
â”‚   â”‚   â”‚   â”œâ”€â”€ science/
â”‚   â”‚   â”‚   â””â”€â”€ english/
â”‚   â”‚   â””â”€â”€ shs/
â”‚   â”‚       â”œâ”€â”€ core-mathematics/
â”‚   â”‚       â””â”€â”€ integrated-science/
â”‚   â”‚
â”‚   â”œâ”€â”€ virtual_labs/
â”‚   â”‚   â”œâ”€â”€ biology/
â”‚   â”‚   â”œâ”€â”€ chemistry/
â”‚   â”‚   â””â”€â”€ physics/
â”‚   â”‚
â”‚   â””â”€â”€ arena_challenges/
â”‚       â”œâ”€â”€ beginner/
â”‚       â”œâ”€â”€ intermediate/
â”‚       â””â”€â”€ advanced/
â”‚
â””â”€â”€ ğŸ“ analytics/                       # Analytics per tenant
    â”œâ”€â”€ smartclass24/
    â”‚   â”œâ”€â”€ daily_active_users
    â”‚   â””â”€â”€ quiz_completion_rate
    â””â”€â”€ dubaiinstitute/
        â”œâ”€â”€ daily_active_users
        â””â”€â”€ quiz_completion_rate
```

---

## ğŸ” Security Rules Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      User Authentication                         â”‚
â”‚                                                                  â”‚
â”‚  User signs in â†’ Firebase Auth â†’ Custom Claims Added            â”‚
â”‚                                                                  â”‚
â”‚  Token:                                                          â”‚
â”‚  {                                                               â”‚
â”‚    uid: "user123",                                               â”‚
â”‚    tenantId: "dubaiinstitute",  â† Tenant claim                  â”‚
â”‚    admin: false,                                                 â”‚
â”‚    email: "student@dubaiinstitute.ae"                            â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Firestore Security Rules                        â”‚
â”‚                                                                  â”‚
â”‚  match /dubaiinstitute_students/{studentId} {                    â”‚
â”‚    allow read: if request.auth.uid == studentId &&               â”‚
â”‚                   belongsToTenant('dubaiinstitute');             â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  function belongsToTenant(tenantId) {                            â”‚
â”‚    return request.auth.token.tenantId == tenantId;              â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Access Decision                               â”‚
â”‚                                                                  â”‚
â”‚  âœ… ALLOW: User from dubaiinstitute accessing                    â”‚
â”‚            dubaiinstitute_students                               â”‚
â”‚                                                                  â”‚
â”‚  âŒ DENY:  User from dubaiinstitute accessing                    â”‚
â”‚            smartclass24_students                                 â”‚
â”‚                                                                  â”‚
â”‚  âœ… ALLOW: Any authenticated user accessing                      â”‚
â”‚            shared_content (read-only)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Branding Resolution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     User Visits Website                          â”‚
â”‚                                                                  â”‚
â”‚  Request: https://dii.smartclass24.app                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Tenant Resolution (Client-side)                 â”‚
â”‚                                                                  â”‚
â”‚  1. Check environment variable (NEXT_PUBLIC_TENANT_ID)           â”‚
â”‚     âŒ Not set                                                   â”‚
â”‚                                                                  â”‚
â”‚  2. Check hostname (window.location.hostname)                    â”‚
â”‚     âœ… "dii.smartclass24.app" â†’ Match in registry                â”‚
â”‚                                                                  â”‚
â”‚  3. Load tenant config from registry                             â”‚
â”‚     {                                                            â”‚
â”‚       id: 'dubaiinstitute',                                      â”‚
â”‚       branding: {                                                â”‚
â”‚         name: 'Dubai International Institute',                   â”‚
â”‚         logoUrl: 'https://.../logo.png',                         â”‚
â”‚         themeColor: '#D4AF37',                                   â”‚
â”‚         colors: { primary: '42 100% 50%', ... }                  â”‚
â”‚       }                                                          â”‚
â”‚     }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Apply Branding (Client-side)                  â”‚
â”‚                                                                  â”‚
â”‚  TenantThemeProvider:                                            â”‚
â”‚  1. Set CSS variables on <html> root element:                    â”‚
â”‚     --primary: 42 100% 50%                                       â”‚
â”‚     --accent: 210 100% 50%                                       â”‚
â”‚     --background: 0 0% 98%                                       â”‚
â”‚                                                                  â”‚
â”‚  2. Update meta tag:                                             â”‚
â”‚     <meta name="theme-color" content="#D4AF37">                  â”‚
â”‚                                                                  â”‚
â”‚  3. Set data attribute:                                          â”‚
â”‚     <html data-tenant="dubaiinstitute">                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Render UI                                   â”‚
â”‚                                                                  â”‚
â”‚  - Logo: Dubai International Institute logo                      â”‚
â”‚  - Colors: Gold primary, Blue accent                             â”‚
â”‚  - Name: "Dubai International Institute" (not SmartClass24)      â”‚
â”‚  - All components use tenant branding automatically              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Content Resolution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Requests Content (e.g., Math lesson)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Content Resolver                              â”‚
â”‚                                                                  â”‚
â”‚  Check tenant.contentStrategy.mode:                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Regional   â”‚  â”‚   Custom    â”‚  â”‚   Hybrid    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                â”‚                â”‚                     â”‚
â”‚         â–¼                â–¼                â–¼                     â”‚
â”‚  Load from        Load from      Try custom first,              â”‚
â”‚  shared_content   {tenant}_     fallback to shared              â”‚
â”‚                   content                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Example Flows                                 â”‚
â”‚                                                                  â”‚
â”‚  Ghana User (smartclass24):                                      â”‚
â”‚  â”œâ”€ Mode: Regional                                               â”‚
â”‚  â”œâ”€ Path: shared_content/ghana/jhs/mathematics/                  â”‚
â”‚  â””â”€ Result: Ghana JHS Math curriculum                            â”‚
â”‚                                                                  â”‚
â”‚  Dubai User (dubaiinstitute) - Custom Only:                      â”‚
â”‚  â”œâ”€ Mode: Custom                                                 â”‚
â”‚  â”œâ”€ Path: dubaiinstitute_content/subjects/mathematics/           â”‚
â”‚  â””â”€ Result: UAE KHDA Math curriculum                             â”‚
â”‚                                                                  â”‚
â”‚  Dubai User (dubaiinstitute) - Hybrid:                           â”‚
â”‚  â”œâ”€ Mode: Hybrid                                                 â”‚
â”‚  â”œâ”€ Try: dubaiinstitute_content/subjects/arabic/ âœ… Found        â”‚
â”‚  â”œâ”€ Try: dubaiinstitute_content/labs/chemistry/ âŒ Not found     â”‚
â”‚  â”œâ”€ Fallback: shared_content/virtual_labs/chemistry/ âœ… Found    â”‚
â”‚  â””â”€ Result: Custom Arabic + Shared Chemistry Lab                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architectures

### Option 1: Single Firebase Project (Shared)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Firebase Project: smartclass24                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Authentication                          â”‚  â”‚
â”‚  â”‚  - All tenants share one auth pool                         â”‚  â”‚
â”‚  â”‚  - Tenant ID stored in user claims                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Firestore                             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  smartclass24_students/     (Ghana data)                   â”‚  â”‚
â”‚  â”‚  dubaiinstitute_students/   (Dubai data)                   â”‚  â”‚
â”‚  â”‚  lagos_students/            (Lagos data)                   â”‚  â”‚
â”‚  â”‚  shared_content/            (All tenants)                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  âœ… Cost: $200/month for all tenants                       â”‚  â”‚
â”‚  â”‚  âš ï¸ Shared quotas: 10K writes/sec                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Hosting                               â”‚  â”‚
â”‚  â”‚  - smartclass24.app                                         â”‚  â”‚
â”‚  â”‚  - *.smartclass24.app (all subdomains)                      â”‚  â”‚
â”‚  â”‚  - Custom domains via DNS CNAME                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option 2: Dedicated Firebase Projects (Enterprise)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase: smartclass24  â”‚  â”‚ Firebase: dubaiinstitute â”‚
â”‚                          â”‚  â”‚                          â”‚
â”‚  Authentication          â”‚  â”‚  Authentication          â”‚
â”‚  - Ghana users only      â”‚  â”‚  - Dubai users only      â”‚
â”‚                          â”‚  â”‚                          â”‚
â”‚  Firestore               â”‚  â”‚  Firestore               â”‚
â”‚  - students/             â”‚  â”‚  - students/             â”‚
â”‚  - challenges/           â”‚  â”‚  - challenges/           â”‚
â”‚  - shared_content/       â”‚  â”‚  - content/              â”‚
â”‚                          â”‚  â”‚  - shared_content/       â”‚
â”‚  Hosting                 â”‚  â”‚    (replicated)          â”‚
â”‚  - smartclass24.app      â”‚  â”‚                          â”‚
â”‚                          â”‚  â”‚  Hosting                 â”‚
â”‚  âœ… Independent quotas   â”‚  â”‚  - dubaiinstitute.ae     â”‚
â”‚  âœ… Full isolation       â”‚  â”‚                          â”‚
â”‚  âš ï¸ Higher cost          â”‚  â”‚  âœ… Independent quotas   â”‚
â”‚                          â”‚  â”‚  âœ… Full isolation       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       $200/month                   $200/month
```

---

## ğŸ”„ User Journey Comparison

### Ghana User (Regional Content)

```
1. Visit: https://smartclass24.app
   â†“
2. Tenant: smartclass24 (default)
   â†“
3. Branding: SmartClass24 (purple theme)
   â†“
4. Auth: Sign in â†’ tenantId: "smartclass24"
   â†“
5. Content: Ghana JHS/SHS curriculum
   â”œâ”€ Mathematics (Ghana)
   â”œâ”€ Integrated Science (Ghana)
   â”œâ”€ Social Studies (Ghana)
   â””â”€ Virtual Labs (Global)
   â†“
6. Data: Stored in smartclass24_students/
```

### Dubai User (Custom Content)

```
1. Visit: https://learning.dubaiinstitute.ae
   â†“
2. Tenant: dubaiinstitute (custom domain)
   â†“
3. Branding: Dubai International Institute (gold theme)
   â†“
4. Auth: Sign in â†’ tenantId: "dubaiinstitute"
   â†“
5. Content: UAE KHDA curriculum
   â”œâ”€ Mathematics (UAE)
   â”œâ”€ Arabic (UAE)
   â”œâ”€ Islamic Studies (UAE)
   â””â”€ Virtual Labs (Global, licensed)
   â†“
6. Data: Stored in dubaiinstitute_students/
```

---

## ğŸ”Œ Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SmartClass24 Platform                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Payment         â”‚  â”‚   SMS/Email    â”‚  â”‚   Analytics    â”‚ â”‚
â”‚  â”‚   Gateway         â”‚  â”‚   Provider     â”‚  â”‚   Provider     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                     â”‚                    â”‚         â”‚
â”‚            â–¼                     â–¼                    â–¼         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Tenant-Specific Integrations                  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  smartclass24:                                           â”‚   â”‚
â”‚  â”‚  - Payment: Stripe (Ghana)                               â”‚   â”‚
â”‚  â”‚  - SMS: MTN Mobile Money                                 â”‚   â”‚
â”‚  â”‚  - Analytics: Google Analytics                           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  dubaiinstitute:                                         â”‚   â”‚
â”‚  â”‚  - Payment: Stripe (UAE)                                 â”‚   â”‚
â”‚  â”‚  - SMS: Twilio (UAE numbers)                             â”‚   â”‚
â”‚  â”‚  - Analytics: Google Analytics                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Characteristics

### Single Project (Shared)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Performance Profile                          â”‚
â”‚                                                                  â”‚
â”‚  Read Latency:   ~50-100ms  (Frankfurt to Ghana)                â”‚
â”‚  Write Latency:  ~100-200ms (Firebase transactions)             â”‚
â”‚  Max Throughput: 10K writes/sec, 50K reads/sec                  â”‚
â”‚  Storage:        Unlimited (pay per GB)                         â”‚
â”‚  Cost:           $200-500/month for 10-50 tenants               â”‚
â”‚                                                                  â”‚
â”‚  Bottlenecks:                                                    â”‚
â”‚  - Shared write quota (10K/sec across ALL tenants)              â”‚
â”‚  - No regional failover (single region deployment)              â”‚
â”‚                                                                  â”‚
â”‚  Best For:                                                       â”‚
â”‚  - 5-50 institutions                                             â”‚
â”‚  - 10K-50K total students                                        â”‚
â”‚  - <1K concurrent users                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dedicated Projects (Enterprise)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Performance Profile                          â”‚
â”‚                                                                  â”‚
â”‚  Read Latency:   ~50-100ms  (per region)                        â”‚
â”‚  Write Latency:  ~100-200ms (per project)                       â”‚
â”‚  Max Throughput: 10K writes/sec PER PROJECT                     â”‚
â”‚  Storage:        Unlimited per project                          â”‚
â”‚  Cost:           $200-500/month PER PROJECT                     â”‚
â”‚                                                                  â”‚
â”‚  Benefits:                                                       â”‚
â”‚  - Independent quotas (no sharing)                               â”‚
â”‚  - Regional deployment (Dubai project in Middle East)           â”‚
â”‚  - Complete isolation                                            â”‚
â”‚                                                                  â”‚
â”‚  Best For:                                                       â”‚
â”‚  - Large institutions (>5K students each)                        â”‚
â”‚  - High concurrency (>1K concurrent users)                       â”‚
â”‚  - Data residency requirements                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Scalability Roadmap

```
Year 1: Foundation
â”œâ”€ 1-5 tenants
â”œâ”€ Single Firebase project (shared)
â”œâ”€ Regional content (West Africa)
â””â”€ Basic white-label

Year 2: Growth
â”œâ”€ 5-20 tenants
â”œâ”€ Still single project (optimize)
â”œâ”€ Hybrid content (regional + custom)
â””â”€ Full white-label

Year 3: Enterprise
â”œâ”€ 20-50 tenants
â”œâ”€ Mix: Shared + Dedicated projects
â”œâ”€ Custom content for most
â””â”€ Multi-region deployment

Year 4+: Global
â”œâ”€ 50-200 tenants
â”œâ”€ Mostly dedicated projects
â”œâ”€ Regional Firebase deployments
â”‚   â”œâ”€ europe-west3 (Europe/Africa)
â”‚   â”œâ”€ asia-south1 (Middle East/Asia)
â”‚   â””â”€ us-central1 (Americas)
â””â”€ Full platform autonomy per tenant
```

---

**Document Status**: âœ… Complete  
**Last Updated**: February 2, 2026  
**Version**: 1.0
